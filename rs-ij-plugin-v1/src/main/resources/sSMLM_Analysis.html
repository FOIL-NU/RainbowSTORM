<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
   <body style="margin:10;">
        <div>
 <h1>RainbowSTORM sSMLM Analysis</h1>

<h2>Camera Setup Parameters:</h2> 
The camera setup parameters listed below are used to convert digitized pixel values to photons.
<ul>
    <li>Pixel Size: Camera pixel size in nanometers</li>
    <li>adu: Conversion factor between analog(photons) and digital units </li>
    <li>Base-level: The base-level offset of the camera in digital units</li>
    <li>EM Gain: Electron multiplier gain of the camera </li>
</ul>

 <h2>Cropping Parameters:</h2> 
 The cropping parameters listed below are used to separate the spatial images from the spectral images. 
 The parameters can be updated by selecting the spatial image using the Rectangular Selection tool from ImageJ's toolbar or by manually inputting the parameters.
 <ul>
     <li>x position: Starting x position for the spatial image</li>
     <li>y position: Starting y position for the spatial image</li>
     <li>Width: Width of the spatial image</li>
     <li>Height: Height of the spatial image </li>
     <li>w</li>
 </ul>
 
<h2>Spatial Analysis using ThunderSTORM</h2> 
ThundersTORM is used to perform spatial analysis. During spatial analysis the camera settings used in ThunderSTORM and RainbowSTORM need to be the same.
The results can be saved as a CSV file, the following columns must be included
<ul>
    <li>frame: the frame of each localization</li>
    <li>x: the x position of each localization</li>
    <li>y: the y position of each localization</li>
    <li>intensity (photons): total photons of the fitted blinking event in the spatial domain</li>
    <li>sigma (spatial sigma): the standard deviation of the fitted emission event in the spatial domain</li>
    <li>uncertainty (localization uncertainty):the estimated uncertainty in the lateral position of each fitted emission events</li>
</ul>
For three-dimensional images the sigma field will be replaced by the following fields:
<ul>
    <li>z: the axial position of each localization</li>
    <li>sigma1 (spatial sigma1): the standard deviation of the fitted emission event in the spatial domain along the lateral axis for 3D sSMLM images</li>
    <li>sigma2 (spatial sigma2): the standard deviation of the fitted emission event in the spatial domain along the axial axis for 3D sSMLM images</li>
</ul>

<h2>Visualization Settings:</h2>
RainbowSTORM's visualization settings are used to set the reconstruction method (Scatter Plot or Averaged Gaussian) and magnification for the image reconstruction.

<h2>Loading spatial and calibration information</h2>
The saved CSVs containing the spatial and calibration information can be loaded into RainbowSTORM using the sSMLM analysis screen.

<h2>Background Subtraction:</h2>
Background subtraction can be performed using an automatic threshold or a manual threshold
For automatic global background threshold selection, check the  'Automatic Background Subtraction' checkbox.
For the manual global background threshold, uncheck the 'Automatic Background Subtraction' checkbox and input the digitized pixel value from the sample background in the background threshold text field.


<h2> Spectroscopic Analysis:</h2>
The following parameters are used for spectroscopic analysis
<ul>
    <li>Localization pixel shift: the number of pixels to cover the point spread function (Range: +/-1 to 3)</li>
    <li>Spectrum width: the width of the spectrum can be automatically determined or the average spectrum width of the dye being used can be manually input </li>
    <li>Spectrum window: the window used for estimating the spectral centroid for each localization (Recommended range: 100-150 nm)</li>
</ul>
Default settings are optimized for Far Red dyes e.g. Alexa Fluor 647 with spectral centroids ranging from 670 nm to 700 nm.

Users have the option of automatically removing localizations with spectra which overlap in space by checking the 'Remove Overlapping Spectra' checkbox.
Users can preview the results of the spectroscopic analysis for individual localizations using the current analysis settings by pressing the preview button.
Next the 'Run Analysis' button is pressed to calculate the results of the spectroscopic analysis for all localizations.

  <h2>RainbowSTORM Help Screens</h2>     
            Details for using each RainbowSTORM screen can be found below:
            <ul>
                <li><a href="AboutRainbowSTORM.html">About RainbowSTORM</a> </li>
                <li><a href="sSMLM_Calibration.html">Calibration Screen</a> </li>
                <li><a href="sSMLM_Preview.html">Preview Screen</a> </li>
                <li><a href="sSMLM_Visualization.html">Visualization Screen</a> </li>
                <li><a href="sSMLM_Classification.html">Classification Screen</a> </li>
                <li><a href="sSMLM_Import.html">Import Screen</a> </li>
            </ul>
        Additional details are available in our <a href="https://academic.oup.com/bioinformatics/article/doi/10.1093/bioinformatics/btaa635/5871346#supplementary-data">user guide</a>
    </div>
    </body>
</html>
